<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>sketch-006: land wave</title>
	<style>
		body {
			margin:0;
		}

		svg {
			position: absolute;
		}

		.a {
			fill: #94d31b;
			stroke-width: 10;
		}

		form {
			position: absolute;
		}
	form {
		visibility: hidden;
	}

	</style>
</head>
<body>

	<form name='draw'>
		<input type="file"></input>
		<textarea></textarea>
	</form>

	<script src='js/p5.js'></script>
	<script>

	"use strict"

	const w = window.innerWidth;
	const h = window.innerHeight;


	const vs = [];

	const cs = [
				{ r: 105, g: 140, b: 115 },
				{ r: 221, g: 188, b: 155 },
				{ r: 124, g: 160, b: 146 },
				{ r: 171, g: 111, b: 110 },
				{ r: 179, g:  96, b:  79 },
				{ r: 203, g: 199, b: 188 },
				{ r:  29, g:  19, b:   9 },
				{ r:  61, g:  72, b:  52 }
			];

	const textArea = document.querySelector('textarea');
	const fileIn = document.querySelector('input');
	
		

	function setup(){
		createCanvas(w,h);
		// background(0);
		// let a = palette;
	}

	function drawImg(filename) {
		let img = loadImage(filename);
		image(img, 0,0, img.width/2, img.height/2);		
	}


	function drawShape(){
		stroke(255);
		noFill();
		beginShape();
		vs.forEach((v)=> {
			curveVertex(v.x, v.y);
		});
		endShape();
	}


	function writeShape(elm) {
		let s = '';
		s += `beginShape()\n`;
		vs.forEach((v)=> {
			s += `bezierVertex(${v.x}, ${v.y})\n`;
		});
		s += `endShape()\n`;
		elm.value = s;
	}


	function draw() {
		// background(0);
		// cs.forEach((c, i) => {
		// 		fill(c.r, c.g, c.b);
		// 		rect(i*50, 0, 50, 50);
		// 	});
		vs.push({x:mouseX, y:mouseY});
		drawShape();
		vs.pop();
		writeShape(textArea);
		stroke(12,140,130);
		beginShape();
		vertex(5,5);
		bezierVertex(120,-60, 130,-50,200,150);
		bezierVertex(190,-30, 120,-30, 300,350);
		endShape();
	}

	fileIn.addEventListener('change', (e)=> {
		// console.log(inputFile.files[0]);
		document.body.style.background = `url(./${fileIn.files[0].name})`;
		document.body.style.backgroundSize = 'contain';
	});

	document.body.addEventListener('click', e => {
			vs.push({x:e.clientX, y:e.clientY});
	})



	</script>
</body>
</html>